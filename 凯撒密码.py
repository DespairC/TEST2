print('''
======================å‡¯æ’’åŠ å¯†ä¸è§£å¯†===========================
===============================================================''')
file_mode = input('''a.txtæ–‡ä»¶          b.æ–‡æœ¬
è¯·è¾“å…¥æ‰€é€‰æ¨¡å¼-->:''')
#æ¨¡å¼é€‰æ‹©
mode = input('''1.åŠ å¯†             2.è§£å¯†
è¯·è¾“å…¥æ‰€é€‰æ¨¡å¼-->ï¼š''')
key = input('è¯·è¾“å…¥å¯†ä½(é»˜è®¤ä¸º3)-->ï¼š')
etxt = ''

#åˆ¤æ–­è½¬åŒ–
if key == '':    #è®¾ç½®é»˜è®¤ä¸º 3
    key = 3
else:
    key = int(key)
if file_mode == 'a':    #æ¨¡å¼A  åŠ å¯†æˆ–è§£å¯†txtæ–‡ä»¶
    trace = input(r'æ–‡ä»¶åœ°å€ï¼ˆ?:...\...\..txtï¼‰ï¼š')
    f = open(trace)
    ftxt = f.read()
elif file_mode == 'b':    #æ¨¡å¼B    åŠ å¯†æˆ–è§£å¯†æ–‡æœ¬
    ftxt = input('è¯·è¾“å…¥åŠ å¯†æ–‡æœ¬-->:')
else:                     #è¾“é”™è¯·é‡æ–°è¿è¡Œ
    print('    é”™è¯¯ï¼è¯·å†æ¬¡è¿è¡Œè¯¥ç¨‹åº.')
    exit()

#æ‰§è¡ŒåŠ å¯†æˆ–è§£å¯†
for nftxt in ftxt:
    num = ord(nftxt)
#åˆ¤æ–­æ¨¡å¼
    if 97 <= num <= 122:            #åˆ¤æ–­æ˜¯å¦ä¸ºå°å†™å­—æ¯
        if mode == '1':
            num = num + key
        elif mode == '2':
            num = num - key                         #å…¶å®è¿™é‡Œå¯ä»¥å…¨éƒ¨ä¸€èµ·åŠ å¯†ä½ï¼Œä½†æˆ–è®¸è¿™æ ·è®©äººçœ‹ä¸å‡ºæ¥åŠ å¯†å¯†ä½ï¼ŒæŒ å¤´ã€‚ã€‚
        if num < 97:                                  #å…¶å®è¿˜æ˜¯å¾ˆå®¹æ˜“çœ‹å‡ºæ¥ï¼ŒğŸ˜°ğŸ˜°
            num = num + 26                               #è€Œä¸”è¿™ä¸€æ®µæœ‰é‡å¤ï¼Œå°è¯•å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥é¿å…é‡å¤ï¼Œä½†å®šä¹‰å‡½æ•°åå˜é‡åˆå˜ä¸ºä¸å¯è¯»ã€‚
        elif num > 122:
            num = num - 26
    else:                            #åˆ¤æ–­æ˜¯å¦ä¸ºå…¶ä»–ç¬¦å·ï¼ˆåŒ…æ‹¬å¤§å†™å­—æ¯ï¼‰
        if mode == '1':
            num = num + key
        elif mode == '2':
            num = num - key
    etxt = etxt + chr(num)

#è¾“å‡ºç»“æœ
if file_mode == 'a':
    ftxt = open(trace,'w')
    ftxt.write(etxt)
    ftxt.close()
    if mode == '1':
        print('txtæ–‡ä»¶åŠ å¯†å®Œæˆ')
    elif mode == '2':
        print('txtæ–‡ä»¶è§£å¯†å®Œæˆ')
    input()
if file_mode == 'b':
    if mode == '1':
        print('åŠ å¯†æ–‡æœ¬ï¼š%s' %etxt)
    elif mode == '2':
        print('è§£å¯†æ–‡æœ¬ï¼š%s' %etxt)
    input()
